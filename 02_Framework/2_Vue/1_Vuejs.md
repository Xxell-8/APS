# 01. Vue

> - Vue.js
>   - 사용자 인터페이스를 만들기 위한 진보적인 프레임워크
>   - 현대적인 tool과 다양한 라이브러리를 통해 SPA(Single Page Aplication)를 완벽하게 지원
>   - Evan You에 의해 발표
>     - 구글 Angular 보다 가볍고, 간편하게 사용할 수 있는 프레임워크를 만들기 위해 개발



# 0. INTRO



## 1. SPA

>  Single Page Application (단일 페이지 애플리케이션)

- 현재 페이지를 동적으로 작성함으로써 사용자와 소통하는 웹 애플리케이션
- 단일 페이지로 구성되며 서버로부터 처음에만 페이지를 받아오고 이후에는 동적으로 DOM을 구성
  - 즉, 처음 페이지를 받은 이후에는 서버로부터 완전한 새로운 페이지를 불러오지 않고 현재 페이지를 동적으로 다시 작성
  - 연속되는 페이지 간의 **사용자 경험 향상**
  - 모바일 사용이 증가하고 있는 상황에서 트래픽의 감소와 속도, 사용성, 반응성 향상은 매우 중요한 이슈

- 등장 배경
  - 과거 웹 사이트는 요청에 따라 매번 새로운 페이지를 응답하는 방식
    - Multi Page Application (MPA)
  - 스마트폰 등장으로 모바일 최적화에 대한 필요성
    - 모바일 네이티브 앱과 같은 형태의 웹 페이지 필요
  - 이러한 문제를 해결하기 위해 Vue와 같은 프론트엔트 프레임워크 등장
    - CSR, SPA 등장
  - 1개의 웹 페이지에서 여러 동작이 이루어지며 모바일 앱과 비슷한 형태의 사용자 경험 제공



## 2. CSR

> Client Side Rendering

- 최초 요청 시 서버에서 빈 문서를 응답하고 이후 클라이언트에서 데이터를 요청해 데이터를 받아 DOM을 렌더링

- SSR보다 초기 전송되는 페이지 속도는 빠르지만, 서비스에서 필요한 데이터를 클라이언트(브라우저)에서 추가로 요청하여 재구성해야 하기 때문에 전체적인 페이지 완료 시점은 SSR보다 느림

- SPA가 사용하는 렌더링 방식

  | 장점                                                         | 단점                                          |
  | ------------------------------------------------------------ | --------------------------------------------- |
  | - 서버와 클라이언트 간의 트래픽 감소<br /> 👉 웹 애플리케이션에 필요한 모든 정적 리소스를 최초에 한 번 다운로드<br />- 사용자 경험 향상<br /> 👉 변경되는 부분만을 갱신 | - SEO (검색엔진 최적화) 문제가 발생할 수 있음 |

#### cf. SSR

>  Server Side Rendering

- 서버에서 사용자에게 보여줄 페이지를 모두 구성하여 사용자에게 페이지를 보여주는 방식

- 서버를 이용해서 페이지를 구성하기 때문에 클라이언트에서 구성하는 CSR보다 페이지를 구성하는 속도는 늦지만 사용자에게 보여주는 콘텐츠 구성이 완료되는 시점은 빨라짐

  | 장점                                                         | 단점                                                         |
  | ------------------------------------------------------------ | ------------------------------------------------------------ |
  | - 초기 로딩 속도가 빠르기 때문에 사용자가 콘텐츠를 빨리 볼 수 있음<br />- SEO (검색엔진 최적화) 가능 | - 모든 요청에 새로고침이 되기 때문에 사용자 경험이 떨어짐<br /> 👉 상대적으로 요청 횟수가 많아져 서버 부담이 커짐 |



## 3. SEO

> Search Engine Optimization (검색 엔진 최적화)

- 웹 페이지 검색 엔진이 자료를 수집하고 순위를 매기는 방식에 맞게 웹페이지를 구성해서 검색 결과 상위에 노출될 수 있도록 하는 작업
- 인터넷 마케팅 방법 중 하나
- 구글 등장 이후 검색엔진이 콘텐츠의 신뢰도를 파악하는 기초 지표로 사용
  - 다른 웹 사이트에서 얼마나 인용되었나 반영
  - 타 사이트에 인용되는 횟수를 늘리는 방향으로 최적화

- 문제 대응
  - SPA 프레임워크는 SSR을 지원하는 SEO 대응 기술이 이미 존재
  - 추가적으로 프레임워크 사용 가능
    - Nuxt.js, Next.js



#### cf. SPA with SSR

- CSR과 SSR을 적절히 사용
  - Django에서 Axios를 활용한 좋아요/팔로우 로직의 경우
    - 대부분 서버에서 완성된 HTML을 제공하는 구조(SSR)
  - 특정 요소(좋아요/팔로우)만 AJAX를 활용한 비동기요청으로 필요한 데이터를 클라이언트에서 서버로 직접 요청을 보내 받아오고 JS를 활용해 DOM 조작 (CSR)



# 1. Vue.js

> Why Vue.js?
>
> - 현대 웹 페이지는 페이지 규모가 계속해서 커지고 있으며, 그만큼 사용하는 데이터도 늘어나고 사용자와의 상호작용도 많이 이루어짐
> - 결국 Vanilla JS 만으로는 관리하기 어려움
>
>   - '모든 요소'를 선택해서 '이벤트'를 등록하고 값을 변경해야 하기 때문!
>
>   - Vue.js를 활용할 경우,
>     - DOM과 Data가 연결되어 있으면,
>       - Data를 변경하면 이에 연결된 DOM은 알아서 변경
>       - 즉, Data에 대한 관리가 중요



## 1. MVVM Pattern

- 애플리케이션 로직을 UI로부터 분리하기 위해 설계된 디자인 패턴

![image-20210506093408738](C:\Users\Cell_\AppData\Roaming\Typora\typora-user-images\image-20210506093408738.png)

1. Model
   - **JS Object**
     - Vue Instance 내부에서 data로 사용되며, 이 값이 바뀌면 View(DOM)가 반응

2. View
   - DOM(HTML)
     - Data의 변화에 따라 바뀌는 대상

3. View Model
   - 모든 Vue Instance
     - View와 Model 사이에서 Data와 DOM에 관련된 모든 일을 처리
     - ViewModel을 활용해 Data를 얼마만큼 잘 처리해서 보여줄지(DOM) 고민



#### cf. 코드 작성 순서

- Django

  - 데이터 흐름에 따라 작성
  - url 👉 views 👉 template

  

- Vue.js

  - Data에 따라 DOM이 변경
    - Data 로직 작성 👉 DOM 작성



## 2. Basic Syntax

#### 1. Vue Instance

- Vue 인스턴스 생성 시, Options 객체를 전달

  - 여러 Options을 사용하여 원하는 동작 구현

    | Option    | Descriptions                                                 |
    | --------- | ------------------------------------------------------------ |
    | `el`      | - Vue 인스턴스에 연결(마운트)할 기존 DOM 엘리먼트 필요<br />- CSS 선택자 문자열 혹은 HTMLElenment로 작성<br />- new를 이용한 인스턴스 생성에만 사용 |
    | `data`    | - Vue 인스턴스의 데이터 객체로, Vue 앱의 상태 데이터를 정의<br />- template에서 interpolation을 통해 접근<br />- `v-bind`, `v-on` 등 디렉티브에서도 사용 <br />- Vue 객체 내 다른 함수에서 this 키워드를 통해 접근 가능<br /> 👉 data에서 화살표 함수 사용 금지<br />   👉 부모 컨텍스트를 바인딩하여 `this`가 Vue 인스턴스를 가리키지 않을 수 있음 |
    | `methods` | - Vue 인스턴스에 추가할 메서드<br />- template에서 interpolation을 통해 접근<br />- `v-on`과 같은 디렉티브에서도 사용 가능<br />- Vue 객체 내 다른 함수에서 this 키워드를 통해 접근 가능<br /> 👉 data에서 화살표 함수 사용 금지<br />   👉 `this` 키워드가 제대로 동작하지 않음 |

- Vue Instance === Vue Component



##### cf. `this`

- Vue 함수 객체 내에서 vue 인스턴스를 가리킴
- 단, JS 함수에서의 this 키워드는 다른 언어와 조금 다르게 동작
- 화살표 함수를 사용하면 안되는 경우
  - data
  - method 정의



#### 2. Template Syntax

> - 렌더링된 DOM을 기본 Vue 인스턴스의 데이터에 선언적으로 바인딩할 수 있는 HTML 기반 템플릿 구문을 사용
>   - Interpolation
>   - Directive



##### 1. Interpolation

1. Text
   - `<span>제목: {{ title }}</span>`
2. Raw HTML

   - `<span v-html="rawHtml"></span>`
3. Attributes
   - `<div v-bind:id="userId"></div>`
4. JS 표현식
   - `{{ num + 1 }}`
   - `{{ overview.split('').reverse().join('') }}`



##### 2. Directive

- v- 접두사가 있는 특수 속성
- 표현식의 값이 변경될 때 반응적으로 DOM에 적용하는 역할
- 전달인자
  - `:` (콜론)을 통해 전달인자를 받을 수 있음
- 수식어
  - `.` 으로 표시되는 특수 접미사
  - 디렉티브를 특별한 방법으로 바인딩해야 함을 나타냄



| Directive | Description                                                  |
| --------- | ------------------------------------------------------------ |
| `v-text`  | - 엘리먼트의 textContent를 업데이트<br />- 내부적으로 interpolation 문법이 v-text로 컴파일 됨<br />- `<p v-text="title"></p>` |
| `v-html`  | - 엘리먼트의 innerHTML을 업데이트  👉 **XSS 공격**에 취약<br />- 임의의 사용자로부터 입력 받은 내용은 v-html **절대 사용 금지** |
| `v-show`  | - 조건부 렌더링 중 하나<br />- 엘리먼트는 항상 렌더링되고 DOM에 남아 있음<br />- 단순히 엘리먼트에 display CSS 속성(`display: none;`)을 토글<br />- Expensive initial load, cheap toggle<br />  👉 토글이 자주 일어나는 요소일 경우 활용 |
| `v-if`    | - 조건부 렌더링 중 하나로, 조건에 따라 블록을 렌더링<br />- 디렉티브 표현식이 true일 때만 렌더링<br />- 엘리먼트 및 포함된 디렉티브는 토글하는 동안 삭제되고 다시 작성됨<br />- `v-else-if`, `v-else` 도 사용 가능<br />- Cheap initial load, Expensive toggle<br />  👉 자주 변경되지 않을 경우 활용 |
| `v-for`   | - 원본데이터를 기반으로 엘리먼트 또는 템플릿 블록을 여러 번 렌더링<br />- `item in items` 구문 사용 <br />- item 위치의 변수를 각 요소에서 사용할 수 있음<br /> 👉 v-for 사용시 반드시 key 속성을 각 요소에 작성 <br />- `v-if`와 `v-for`를 동시에 사용할 경우, `v-for`의 우선순위가 더 높음<br />  👉 `v-if`와 `v-for`를 동시에 사용하지 말 것!<br />     ✅ [스타일 가이드](https://kr.vuejs.org/v2/style-guide/#v-if%EC%99%80-v-for%EB%A5%BC-%EB%8F%99%EC%8B%9C%EC%97%90-%EC%82%AC%EC%9A%A9%ED%95%98%EC%A7%80-%EB%A7%88%EC%84%B8%EC%9A%94-%ED%95%84%EC%88%98) |
| `v-on`    | - 엘리먼트에 이벤트 리스너 연결<br />- 이벤트 유형은 전달인자로 표시<br />- 특정 이벤트가 발생했을 때, 주어진 코드가 실행<br />- `v-on:click` 👉 `@click` |
| `v-bind`  | - HTML 요소의 속성에 Vue의 상태 데이터를 값으로 할당<br />- Object 형태로 사용하면 vaue가 true인 key가 class 바인딩 값으로 할당<br />- `v-bind:href` 👉 `:href` |
| `v-model` | - HTML form 요소의 값과 data를 양방향 바인딩 수식어 <br />- [`.lazy`](https://kr.vuejs.org/v2/guide/forms.html#lazy) : `input`대신 `change` 이벤트 반영 <br />- [`.number`](https://kr.vuejs.org/v2/guide/forms.html#number) : 문자열을 숫자로 변경<br />- [`.trim`](https://kr.vuejs.org/v2/guide/forms.html#trim) : 입력에 대한 trim 적용 |



#### 3. Computed

- 데이터를 기반으로 하는 계산된 속성
- 함수의 형태로 정의하지만 함수가 아닌 함수의 반환 값이 바인딩
- 종속된 대상을 따라 저장(캐싱)되며, 종속된 대상이 변경될 때만 함수 실행

- 즉, Date.now() 처럼 아무 곳에도 의존하지 않는 computed 속성의 경우 절대로 업데이트되지 않음
- 반드시 반환 값이 있어야 함



##### cf. watch

- 데이터를 감시

- 데이터에 변화가 일어났을 때 실행되는 함수

  | computed                                                     | watch                                                        |
  | ------------------------------------------------------------ | ------------------------------------------------------------ |
  | 특정 값이 변동하면 특정 값을 새로 계산해서 보여준다.         | 특정 값이 변동하면 다른 작업을 실행한다.                     |
  | - 특정 데이터를 직접적으로 사용/가공하여 다른 값으로 만들 때 사용<br />- computed 속성은 계산해야 하는 목표 데이터를 정의하는 방식으로 소프트웨어 공학에서 이야기하는 ‘**선언형** 프로그래밍’ 방식 | - 특정 데이터의 변화 상황에 맞춰 다른 data 등이 바뀌어야 할 때 주로 사용<br />- watch 속성은 감시할 데이터를 지정하고 그 데이터가 바뀌면 이런 함수를 실행하라는 방식으로 소프트웨어 공학에서 이야기하는 ‘**명령형** 프로그래밍’ 방식 |
  |                                                              |                                                              |



##### cf. computed & methods

- computed 속성 대신 methods에 함수를 정의할 수 있음
  - 최종 결과에 대해 두 가지 접근 방식은 서로 동일
- 단, computed 속성은 종속 대상을 따라 저장(캐싱) 됨
  - 종속된 대상이 변경되지 않는 한 computed에 작성된 함수를 여러 번 호출해도 계산을 다시 하지 않고 계산되어 있던 결과를 반환
  - 이에 비해 methods를 호출하면 렌더링을 다시 할 때마다 항상 함수를 실행



#### 4. filters

- 텍스트 형식화를 적용할 수 있는 필터
- interpolation 혹은 v-bind를 이용할 때 사용 가능
- 필터는 자바스크립트 표현식 마지막에 `|`와 함께 추가
- 체이닝 가능



## 3. Lifecycle Hooks

- 각 Vue 인스턴스는 생성될 때 일련의 초기화 단계를 거침
  - 예를 들어 데이터 관찰 설정이 필요한 경우, 인스턴스를 DOM에 마운트하는 경우, 그리고 데이터가 변경되어 DOM을 업데이트하는 경우 등
  
- 그 과정에서 사용자 정의 로직을 실행할 수 있는 라이프 사이클 훅도 호출됨

  ![image-20210516154238876](Vue 01.assets/image-20210516154238876.png)

## 4. Lodash

- 모듈성, 성능 및 추가 기능을 제공하는 JS 유틸리티 라이브러리
- array, object 등 자료구조를 다룰 때 사용하는 유용하고 간편한 유틸리티 함수 제공
- reverse, sortBy, range, random ...



